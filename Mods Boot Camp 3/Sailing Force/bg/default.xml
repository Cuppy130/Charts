<ActorFrame><children>	

	<ActorFrame OnCommand="%function(self)
			sf_sky = self;
		end"><children>
		<Layer File="day"
			OnCommand="%function(self)
				self:hidden(1)
				self:x(SCREEN_WIDTH*.5)
				self:y(SCREEN_HEIGHT*.5)
				self:zoomtowidth(SCREEN_WIDTH)
				self:zoomtoheight(SCREEN_HEIGHT*1.1)

				sf_bgd = self;
			end"
		/>
		<Layer File="rise"
			OnCommand="%function(self)
				self:hidden(1)
				self:x(SCREEN_WIDTH*.5)
				self:y(SCREEN_HEIGHT*.5)
				self:zoomtowidth(SCREEN_WIDTH)
				self:zoomtoheight(SCREEN_HEIGHT*1.1)

				sf_bgr = self;
			end"
		/>
		<Layer File="night1"
			OnCommand="%function(self)
				self:hidden(1)
				self:x(SCREEN_WIDTH*.5)
				self:y(SCREEN_HEIGHT*.5)
				self:zoomtowidth(SCREEN_WIDTH)
				self:zoomtoheight(SCREEN_HEIGHT*1.1)

				sf_bgn = self;
			end"
		/>
		<Layer File="sun"
			OnCommand="%function(self)
				self:hidden(0)
				self:x(SCREEN_WIDTH*.5)
				self:y(SCREEN_HEIGHT)
				self:zoomtowidth(SCREEN_WIDTH)
				self:zoomtoheight(SCREEN_HEIGHT)
				self:bob()
				self:effectmagnitude(0,.1,0)
				self:effectclock('bgm')
				self:effectoffset(4)
				self:effectperiod(8)
				self:blend('add')
				sf_bgs = self;
			end"
		/>
		<Layer File="moon"
			OnCommand="%function(self)
				self:hidden(0)
				self:x(SCREEN_WIDTH*.5)
				self:y(SCREEN_HEIGHT)
				self:zoom(.5)
				self:bob()
				self:effectmagnitude(0,.1,0)
				self:effectclock('bgm')
				self:effectoffset(0)
				self:effectperiod(8)
				self:blend('add')
				sf_bgm = self;
			end"
		/>
		<Layer Type="ActorFrame" OnCommand="%function(self)
			sf_waveframe = self;
		end"><children>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave1 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:effectoffset(.5)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(-.5,0);
					table.insert(sf_wavepool,self)
				end"
			/>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave2 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(.5,0);
					table.insert(sf_wavepool,self)
				end"
			/>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave3 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:effectoffset(.5)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(-.5,0);
					table.insert(sf_wavepool,self)
				end"
			/>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave4 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(.5,0);
					table.insert(sf_wavepool,self)
				end"
			/>
					<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave5 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:effectoffset(.5)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(-.5,0);
					table.insert(sf_wavepool,self)
				end"
			/>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave6 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(.5,0);
					table.insert(sf_wavepool,self)
				end"
			/>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave7 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:effectoffset(.5)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(-.5,0);
					table.insert(sf_wavepool,self)
				end"
			/>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave8 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(.5,0);
					table.insert(sf_wavepool,self)
				end"
			/>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave9 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:effectoffset(.5)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(-.5,0);
					table.insert(sf_wavepool,self)
					self:fadebottom(.2)
				end"
			/>
			<Layer File="wave"
				OnCommand="%function(self)
					self:hidden(0)
					self:x(SCREEN_WIDTH*.5)
					self:y(SCREEN_HEIGHT*.5)
					self:basezoomx(SCREEN_WIDTH/512)
					self:basezoomy(SCREEN_HEIGHT/2048)
					sf_wave10 = self;
					self:croptop(.05)
					self:bob()
					self:effectmagnitude(0,5,0)
					self:customtexturerect(0,0,8,1);
					self:texcoordvelocity(.5,0);
					table.insert(sf_wavepool,self)
					self:fadebottom(.2)
				end"
			/>
		
		</children></Layer>
		
		<Layer File="nightoverlay"
			OnCommand="%function(self)
				self:hidden(0)
				self:x(SCREEN_WIDTH*.5)
				self:y(SCREEN_HEIGHT*.75)
				self:zoomtowidth(SCREEN_WIDTH)
				self:zoomtoheight(SCREEN_HEIGHT)
				self:pulse()
				self:effectmagnitude(1.05,1.15,0)
				self:effectclock('bgm')
				self:effectoffset(4)
				self:effectperiod(6)
				self:diffusealpha(.5)
				sf_bgover = self;
			end"
		/>
		
		<Layer Type="Quad"
		OnCommand="%function(self)
			self:hidden(0)
			self:x(SCREEN_WIDTH*.5)
			self:y(SCREEN_HEIGHT*1.5)
			self:zoomtowidth(SCREEN_WIDTH)
			self:zoomtoheight(SCREEN_HEIGHT*1.2)
			self:diffuse(0,52/255,103/255,1)
			self:fadetop(.1)
		end"
		/>
	</children></ActorFrame>

	<ActorFrame OnCommand="%function(self)
			sf_ocean = self;
			--self:y(SCREEN_HEIGHT*1.3)
			self:hidden(1)
		end"><children>
	
		<Layer File="ocean"
			OnCommand="%function(self)
				self:hidden(0)
				self:x(SCREEN_WIDTH*.5)
				self:y(SCREEN_HEIGHT*.5)
				self:zoomtowidth(SCREEN_WIDTH)
				self:zoomtoheight(SCREEN_HEIGHT)
				sf_bgoc = self;
			end"
		/>
		
		<Layer Type="ActorFrame" FOV="45" OnCommand="%function(self) prefix_bgactor = self; self:x(SCREEN_CENTER_X); self:y(SCREEN_CENTER_Y);  self:hidden(0); end" ShowCommand="hidden,0" HideCommand="hidden,1" ><children>
			<ActorFrame OnCommand="rotationx,-30" ><children>
					<Layer File="stars" OnCommand="diffusealpha,0;zoomto,SCREEN_WIDTH*1.5,SCREEN_HEIGHT*1.5;customtexturerect,0,0,12,8;texcoordvelocity,0,2;fadebottom,0.75;blend,add;queuecommand,Update2" Update2Command="%function(self) sf_stars1 = self; self:queuecommand('Update'); end"
					UpdateCommand="texcoordvelocity,math.sin(GAMESTATE:GetSongBeat()*math.pi/8)*.25,2;sleep,.02;queuecommand,Update"/>
					<Layer File="stars" OnCommand="diffusealpha,0;zoomto,SCREEN_WIDTH*1.5,SCREEN_HEIGHT*1.5;customtexturerect,0,0,9,6;texcoordvelocity,0,2;fadebottom,0.75;blend,add;queuecommand,Update2" Update2Command="%function(self) sf_stars2 = self; end" />
					<Layer File="stars" OnCommand="diffusealpha,0;zoomto,SCREEN_WIDTH*1.5,SCREEN_HEIGHT*1.5;customtexturerect,0,0,6,4;texcoordvelocity,0,2;fadebottom,0.75;blend,add;queuecommand,Update2" Update2Command="%function(self) sf_stars3 = self; self:queuecommand('Update'); end"
					UpdateCommand="texcoordvelocity,math.sin(GAMESTATE:GetSongBeat()*math.pi/8)*-.25,2;sleep,.02;queuecommand,Update" />
			</children></ActorFrame>
		</children></Layer>
	</children></ActorFrame>
	
	<Layer File="bloom"
		OnCommand="%function(self)
			self:hidden(0)
			self:x(SCREEN_WIDTH*.5)
			self:y(SCREEN_HEIGHT*.5)
			self:zoomtowidth(SCREEN_WIDTH)
			self:zoomtoheight(SCREEN_HEIGHT)
			sf_bgb = self;
			--self:blend('add')
			self:queuecommand('Update')
		end"
		UpdateCommand="%function(self)
			self:diffusealpha(math.sin((GAMESTATE:GetSongBeat()+4)*math.pi/4)*.25+.4)
			self:sleep(.02)
			self:queuecommand('Update')
		end"
	/>
	
	<Layer File="background"
		OnCommand="%function(self)
			self:hidden(0)
			self:x(SCREEN_WIDTH*.5)
			self:y(SCREEN_HEIGHT*.5)
			self:zoomtowidth(SCREEN_WIDTH)
			self:zoomtoheight(SCREEN_HEIGHT)
			sf_bg0 = self;
		end"
	/>
	
	<Layer File="Char/default.xml" />
	
	<Layer Type="Quad"
		OnCommand="%function(self)
			self:hidden(1)
			self:x(SCREEN_WIDTH*.5)
			self:y(SCREEN_HEIGHT*.5)
			self:zoomtowidth(SCREEN_WIDTH)
			self:zoomtoheight(SCREEN_HEIGHT)
			self:diffuse(0,0,0,0)
			sf_bgo = self;
		end"
		IntroCommand="hidden,0;diffusealpha,1;decelerate,spb*8;diffusealpha,0"
		FinaleCommand="hidden,0;diffusealpha,0;linear,spb*.5;diffusealpha,1"
	/>
	
	
</children></ActorFrame>