<ActorFrame> <children>

	<Layer
		File="background"
		OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;ZoomToWidth,SCREEN_WIDTH;ZoomToHeight,SCREEN_HEIGHT;diffusealpha,0.5"
	/>
	
	<Layer
		File="door.png"
		NameCommand="%function(self) nit_doorbg=self end"
		OnCommand="playcommand,Name;hidden,1;x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;ZoomToWidth,SCREEN_WIDTH;ZoomToHeight,SCREEN_HEIGHT;diffuse,.5,.5,.5,1;"
	/>
	
	<Layer Type="ActorFrame" OnCommand="%function (self) nit_chara=self; self:hidden(1); self:bob(); self:effectmagnitude(0,4,0); end"> <children>
		<Layer File="Nitori/_blade" OnCommand="zoomx,1;zoomy,0.4;y,-60;x,-10;rotationz,0"
		IdleCommand="diffusealpha,1;zoomx,1;zoomy,0.4;y,-60;x,-10;rotationz,0"
		AttackCommand="diffusealpha,1;zoomx,1;zoomy,0.4;y,-60;x,-10;rotationz,0"
		CastCommand="diffusealpha,1;zoomx,1;zoomy,0.4;y,-60;x,-10;rotationz,0"
		StunCommand="diffusealpha,0"
		HurtCommand="diffusealpha,1;zoomx,0.4;zoomy,1;y,0;x,-55;rotationz,0"
		/>
		<Layer File="Nitori/_idle" 
		IdleCommand="diffusealpha,1;setstate,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		StunCommand="diffusealpha,0"
		CastCommand="diffusealpha,0"
		/>
		<Layer File="Nitori/_attack" InitCommand="diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,1;setstate,0"
		HurtCommand="diffusealpha,0"
		StunCommand="diffusealpha,0"
		CastCommand="diffusealpha,0"	
		/>
		<Layer File="Nitori/_cast" InitCommand="diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		StunCommand="diffusealpha,0"
		CastCommand="diffusealpha,1;setstate,0"
		/>
		<Layer File="Nitori/_stun" InitCommand="diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		StunCommand="diffusealpha,1;setstate,0"
		CastCommand="diffusealpha,0"
		/>
		<Layer File="Nitori/_hurt" InitCommand="diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,1;vibrate;sleep,0.5;queuecommand,Stop"
		StopCommand="stopeffect;"
		StunCommand="diffusealpha,0"
		CastCommand="diffusealpha,0"
		/>
		<Layer File="Nitori/_blade" OnCommand="diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		CastCommand="diffusealpha,0"
		StunCommand="diffusealpha,1;zoomx,0.4;zoomy,1;y,0;x,-55;rotationz,0"
		HurtCommand="diffusealpha,0"
		/>
		
		<Layer Type="ActorFrame" OnCommand="basezoomx,.5;basezoomy,.5;zoom,2.5;spin;effectmagnitude,0,0,90;"><children>
			<Layer File="casting"
			OnCommand="blend,add;diffuse,0,1,.5,0;"
			CastCommand="%function (self)
				self:zoom(1.1);
				self:linear(0.8);
				self:diffusealpha(1);
				self:linear(1);
				self:zoom(0.7);
				self:linear(0.8);
				self:diffusealpha(0);
			end"
			/>
		</children> </Layer>
		
		<0Layer Type="ActorFrame" OnCommand="zoom,.5"><children>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,0,1,.5,0.3;effectcolor2,0,1,.5,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,0,1,.5,0.3;effectcolor2,0,1,.5,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,0,1,.5,0.3;effectcolor2,0,1,.5,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,0,1,.5,0.3;effectcolor2,0,1,.5,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		</children> </0Layer>
		
	</children> </Layer>
	
</children> </ActorFrame>