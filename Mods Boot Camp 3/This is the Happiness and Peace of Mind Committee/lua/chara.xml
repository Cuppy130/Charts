<ActorFrame OnCommand="%function(self) self:SetFarDist(7000000); self:fov(60) end"> <children>

	<Layer Type="ActorFrame" OnCommand="%function (self) pos_ama=self; self:zoom(0); self:zoomx(3); self:bob();
	self:effectclock('music'); self:effectmagnitude(0,4,0); end" SpawnQCommand="zoom,1;" HideQCommand="zoomy,0;zoomx,3;"
	HideCommand="bouncebegin,0.2;zoomy,0;zoomx,3;" SpawnCommand="bounceend,0.3;zoom,1;"
	RipCommand="effectoffset,0.6" > <children>
		<Layer Type="Quad" OnCommand="hidden,1"
		IdleCommand="%function(self) pos_amaanim = 1; pos_amahurt = false; end"
		AttackCommand="%function(self) pos_amaanim = 3; pos_amahurt = false; end"
		HurtCommand="%function(self) pos_amahurt = true; end"
		PissedCommand="%function(self) pos_amaanim = 2; pos_amahurt = false; end"
		CastCommand="%function(self) pos_amaanim = 4; pos_amahurt = false; end"
		Cast2Command="%function(self) pos_amaanim = 4; pos_amahurt = false; end"
		StrafeCommand="%function(self) pos_amaanim = 5; pos_amahurt = false; end"
		/>
		<Layer File="anims/main/_idle" OnCommand="effectclock,bgm;diffusealpha,1"
		IdleCommand="diffusealpha,1;setstate,0"
		Idle2Command="finishtweening;diffusealpha,1;setstate,0;zoomx,1.2;zoomy,.9;linear,.1;zoom,1;"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		BrightenCommand="diffuse,1,1,1,0"
		/>
		<Layer File="anims/main/_pissed" OnCommand="effectclock,bgm;diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,1;setstate,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		BrightenCommand="diffuse,1,1,1,0"
		/>
		<Layer File="anims/main/_attack" OnCommand="diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,1;setstate,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		BrightenCommand="diffuse,1,1,1,0"
		/>
		<Layer File="anims/main/_cast" OnCommand="diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		CastCommand="diffusealpha,1;setstate,0"
		Cast2Command="diffusealpha,1;setstate,0"
		BrightenCommand="diffuse,1,1,1,0"
		/>
		
		<Layer File="anims/main/_hurt" OnCommand="diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,1;vibrate;sleep,0.5;queuecommand,Stop"
		StopCommand="stopeffect;"
		PissedCommand="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		BrightenCommand="diffuse,1,1,1,0"
		/>
		<Layer File="anims/main/_strafe" OnCommand="effectclock,bgm;diffusealpha,0"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,1"
		BrightenCommand="diffuse,1,1,1,0"
		/>
		<Layer Type="ActorFrame" OnCommand="zoom,1;spin;effectmagnitude,0,0,90;"><children>
			<Layer File="casting"
			OnCommand="diffuse,.7,0,1,0;"
			CastCommand="%function (self)
				--SOUND:PlayOnce(songName..'lua/spell.ogg');
				self:zoom(1.1);
				self:linear(0.8);
				self:diffusealpha(1);
				self:linear(1);
				self:zoom(0.7);
				self:linear(0.8);
				self:diffusealpha(0);
				self:blend('add');
			end" />
		</children> </Layer>
		
		<Layer File="anims/lights/_idle"
		OnCommand="diffuseramp;effectclock,bgm;effectcolor1,0,.6,1,.4;effectcolor2,0,.6,1,1;effectperiod,.5;effectdelay,.5;effectoffset,.04;blend,add"
		IdleCommand="diffusealpha,1;setstate,0"
		Idle2Command="finishtweening;diffusealpha,1;setstate,0;zoomx,1.2;zoomy,.9;linear,.1;zoom,1;"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		/>
		<Layer File="anims/lights/_pissed"
		OnCommand="diffuseramp;effectclock,bgm;effectcolor1,0,.6,1,.4;effectcolor2,0,.6,1,1;effectperiod,.5;effectdelay,.5;effectoffset,.04;diffusealpha,0;blend,add"
		YellowCommand="diffuse,1,0,0,1;linear,1;diffuse,1,.9,0,1;"
		OrangeCommand="diffuse,1,.9,0,1;linear,1;diffuse,1,.4,0,1;"
		RedCommand="diffuse,1,0,0,1;"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,1;setstate,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		/>
		<Layer File="anims/lights/_attack" OnCommand="diffuse,1,0,0,0;diffusealpha,0;blend,add"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,1;setstate,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		/>
		<Layer File="anims/lights/_cast" OnCommand="diffusealpha,0;blend,add"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,0"
		CastCommand="rainbow;diffusealpha,1;setstate,0;rainbow;sleep,1;queuecommand,stopr;"
		Cast2Command="rainbow;diffusealpha,1;setstate,0;rainbow;sleep,1;queuecommand,stopr;"
		stoprCommand="diffuseramp;effectclock,bgm;effectcolor1,0,.6,1,.4;effectcolor2,0,.6,1,1;effectperiod,.5;effectdelay,.5;effectoffset,.04;"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,0"
		/>
		
		<Layer Type="ActorFrame" HurtCommand="vibrate;sleep,0.5;queuecommand,Stop"
		StopCommand="stopeffect;"> <children>
			<Layer File="anims/lights/_hurt" OnCommand="diffusealpha,0;blend,add;queuecommand,O2;"
			O2Command="%function (self) self:diffuseblink(); self:effectperiod(0.08); self:effectcolor1(1,0,0,1); self:effectcolor2(0,0,0,0); end"
			IdleCommand="diffusealpha,0"
			AttackCommand="diffusealpha,0"
			HurtCommand="diffusealpha,1;"
			PissedCommand="diffusealpha,0"
			PCastCommand="diffusealpha,0"
			PCast2Command="diffusealpha,0"
			CastCommand="diffusealpha,0"
			Cast2Command="diffusealpha,0"
			/>
		</children> </Layer>
		<Layer File="anims/lights/_strafe"
		OnCommand="diffuseramp;effectclock,bgm;effectcolor1,0,.6,1,.4;effectcolor2,0,.6,1,1;effectperiod,.5;effectdelay,.5;effectoffset,.04;diffusealpha,0;blend,add"
		YellowCommand="diffuse,1,.9,0,0;"
		OrangeCommand="diffuse,1,.4,0,0;"
		RedCommand="linear,.5;diffuse,1,0,0,1;"
		IdleCommand="diffusealpha,0"
		AttackCommand="diffusealpha,0"
		HurtCommand="diffusealpha,0"
		PissedCommand="diffusealpha,0"
		PCastCommand="diffusealpha,0"
		PCast2Command="diffusealpha,0"
		CastCommand="diffusealpha,0"
		Cast2Command="diffusealpha,0"
		StrafeCommand="diffusealpha,1"
		/>
		
		
		
		
		
		
		
		
		<Layer Type="ActorFrame" OnCommand="x,-14" ><children>
		
		<Layer File="anims/main/l.sprite" InitCommand="effectclock,bgm;diffusealpha,0"
			TurnLeftMessageCommand="finishtweening;diffusealpha,1;zoom,1.05;setstate,0;linear,0.3;zoom,1;"
			TurnDownMessageCommand="finishtweening;diffusealpha,0;"
			TurnUpMessageCommand="finishtweening;diffusealpha,0;"
			TurnRightMessageCommand="finishtweening;diffusealpha,0;"
			TurnOffMessageCommand="finishtweening;diffusealpha,0;"
		/>
		<Layer File="anims/main/d.sprite" InitCommand="effectclock,bgm;diffusealpha,0"
			TurnDownMessageCommand="finishtweening;diffusealpha,1;zoom,1.05;setstate,0;linear,0.3;zoom,1;"
			TurnLeftMessageCommand="finishtweening;diffusealpha,0;"
			TurnUpMessageCommand="finishtweening;diffusealpha,0;"
			TurnRightMessageCommand="finishtweening;diffusealpha,0;"
			TurnOffMessageCommand="finishtweening;diffusealpha,0;"
		/>
		<Layer File="anims/main/u.sprite" InitCommand="effectclock,bgm;diffusealpha,0"
			TurnUpMessageCommand="finishtweening;diffusealpha,1;zoom,1.05;setstate,0;linear,0.3;zoom,1;"
			TurnLeftMessageCommand="finishtweening;diffusealpha,0;"
			TurnDownMessageCommand="finishtweening;diffusealpha,0;"
			TurnRightMessageCommand="finishtweening;diffusealpha,0;"
			TurnOffMessageCommand="finishtweening;diffusealpha,0;"
		/>
		<Layer File="anims/main/r.sprite" InitCommand="basezoomx,-1;effectclock,bgm;diffusealpha,0"
			TurnRightMessageCommand="finishtweening;diffusealpha,1;zoom,1.05;setstate,0;linear,0.3;zoom,1;"
			TurnLeftMessageCommand="finishtweening;diffusealpha,0;"
			TurnUpMessageCommand="finishtweening;diffusealpha,0;"
			TurnDownMessageCommand="finishtweening;diffusealpha,0;"
			TurnOffMessageCommand="finishtweening;diffusealpha,0;"
		/>
		<Layer File="anims/lights/l.sprite"
			OnCommand="diffuseramp;effectclock,bgm;effectcolor1,0,.6,1,.4;effectcolor2,0,.6,1,1;effectperiod,.5;effectdelay,.5;effectoffset,.04;diffusealpha,0;blend,add"
			TurnLeftMessageCommand="finishtweening;diffusealpha,1;zoom,1.05;setstate,0;linear,0.3;zoom,1;"
			TurnDownMessageCommand="finishtweening;diffusealpha,0;"
			TurnUpMessageCommand="finishtweening;diffusealpha,0;"
			TurnRightMessageCommand="finishtweening;diffusealpha,0;"
			TurnOffMessageCommand="finishtweening;diffusealpha,0;"
		/>
		<Layer File="anims/lights/d.sprite"
			OnCommand="diffuseramp;effectclock,bgm;effectcolor1,0,.6,1,.4;effectcolor2,0,.6,1,1;effectperiod,.5;effectdelay,.5;effectoffset,.04;diffusealpha,0;blend,add"
			TurnDownMessageCommand="finishtweening;diffusealpha,1;zoom,1.05;setstate,0;linear,0.3;zoom,1;"
			TurnLeftMessageCommand="finishtweening;diffusealpha,0;"
			TurnUpMessageCommand="finishtweening;diffusealpha,0;"
			TurnRightMessageCommand="finishtweening;diffusealpha,0;"
			TurnOffMessageCommand="finishtweening;diffusealpha,0;"
		/>
		<Layer File="anims/lights/u.sprite"
			OnCommand="diffuseramp;effectclock,bgm;effectcolor1,0,.6,1,.4;effectcolor2,0,.6,1,1;effectperiod,.5;effectdelay,.5;effectoffset,.04;diffusealpha,0;blend,add"
			TurnUpMessageCommand="finishtweening;diffusealpha,1;zoom,1.05;setstate,0;linear,0.3;zoom,1;"
			TurnLeftMessageCommand="finishtweening;diffusealpha,0;"
			TurnDownMessageCommand="finishtweening;diffusealpha,0;"
			TurnRightMessageCommand="finishtweening;diffusealpha,0;"
			TurnOffMessageCommand="finishtweening;diffusealpha,0;"
		/>
		<Layer File="anims/lights/r.sprite"
			OnCommand="diffuseramp;effectclock,bgm;effectcolor1,0,.6,1,.4;effectcolor2,0,.6,1,1;effectperiod,.5;effectdelay,.5;effectoffset,.04;diffusealpha,0;blend,add"
			TurnRightMessageCommand="finishtweening;diffusealpha,1;zoom,1.05;setstate,0;linear,0.3;zoom,1;"
			TurnLeftMessageCommand="finishtweening;diffusealpha,0;"
			TurnUpMessageCommand="finishtweening;diffusealpha,0;"
			TurnDownMessageCommand="finishtweening;diffusealpha,0;"
			TurnOffMessageCommand="finishtweening;diffusealpha,0;"
		/>
		
		</children> </Layer>
		
		
		
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,.7,0,1,0.3;effectcolor2,.7,0,1,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,.7,0,1,0.3;effectcolor2,.7,0,1,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,.7,0,1,0.3;effectcolor2,.7,0,1,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,.7,0,1,0.3;effectcolor2,.7,0,1,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		
	</children> </Layer>

</children> </ActorFrame>