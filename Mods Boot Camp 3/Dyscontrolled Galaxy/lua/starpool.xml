<ActorFrame

	InitCommand="%function(self)
		prefix_starparticles = {}
	end"

    OnCommand="%function(self)
        self:rainbow()
    end"
    
    SmileStarsOnMessageCommand="%function(self)
	
		Trace('I\'m kind of hungry');
    
        local centerY = SCREEN_CENTER_Y-(SCREEN_HEIGHT/10)
        local centerX = SCREEN_CENTER_X
        for i,v in pairs(prefix_starparticles) do
            if v then
                local spray_angle = i*(360/32)*(math.pi/180)
                local vector_short = math.random(35,200)/100;
                v:hidden(0);
                --v:diffusealpha(.35);
                v:x(centerX)
                v:y(centerY)
                v:decelerate(1);
                v:x(centerX + (math.cos(spray_angle) * centerX*vector_short))
                v:y(centerY + (math.sin(spray_angle) * centerY*.8*vector_short))
				
				local rz = math.random(0,360)
				
				v:GetChild(''):blend('add')
				v:GetChild(''):rotationz(rz)
				v:GetChild(''):diffusealpha(1.5)
				v:GetChild(''):linear(1.3)
				v:GetChild(''):rotationz(rz+math.random(180,200)*2*(math.random(1,2)*2-3))
				v:GetChild(''):diffusealpha(0)
				
            end
        end
    end"
    
    SmileStarsOffMessageCommand="%function(self)

        for i,v in pairs(prefix_starparticles) do
            if v then
                v:hidden(1)
            end
        end
    end"

><children>
<ActorFrame 
OnCommand="%function(self) 
prefix_stars1=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars1) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars2=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars2) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars3=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars3) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars4=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars4) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars5=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars5) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars6=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars6) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars7=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars7) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars8=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars8) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars9=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars9) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars10=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars10) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars11=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars11) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars12=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars12) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars13=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars13) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars14=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars14) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars15=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars15) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars16=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars16) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars17=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars17) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars18=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars18) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars19=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars19) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars20=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars20) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars21=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars21) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars22=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars22) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars23=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars23) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars24=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars24) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars25=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars25) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars26=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars26) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars27=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars27) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars28=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars28) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars29=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars29) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars30=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars30) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars31=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars31) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

<ActorFrame 
OnCommand="%function(self) 
prefix_stars32=self 
self:hidden(1); table.insert(prefix_starparticles,prefix_stars32) 
end"
><children>
<Layer 
File="splinestar.png" 
OnCommand="%function(self)
self:sleep(0) 
self:x(0) 
self:y(0) 
self:zoom(math.random(200,300)/2000) 
self:rainbow()
self:effectperiod(math.random(10,20)/10) 
end" 
/> 
</children></ActorFrame>

</children></ActorFrame>