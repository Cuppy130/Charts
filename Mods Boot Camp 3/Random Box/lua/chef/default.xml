<GAME Type="ActorFrame"><children>
<ActorFrame OnCommand="x,-SCREEN_CENTER_X;y,-SCREEN_CENTER_Y"><children>
<ActorFrame OnCommand="" InitCommand="%function(self) self:SetDrawByZPosition(true) end" ><children>

	

	<LAER Type="Quad"
		InitCommand="%function(self)
		
			--this is where variables go when the simfile starts up
			--function declarations, and things that will never change even
			--if this particular minigame is restarted after being played once before
		
			--for storing if a button is held down
			loot_chef_held = {0,0,0,0,0,0,0,0};
			
			loot_chef_paused = true;
			
		end"
		OnCommand="%function(self)
			
			--variables set up when a game is started
			loot_chef_lockinput = {0,0};
			
			loot_chef_paused = false;
			
			self:sleep(0.02);
			self:queuecommand('Update');

		end"
		UpdateCommand="%function(self)
			
			--game logic
			
			--Trace(loot_keytimer[1])
			
			if loot_chef_droptimer > 0 then
				loot_chef_droptimer = loot_chef_droptimer-0.02
			end
			
			for pn=1,2 do
				
				if loot_chef_lockinput[pn]>0 then
					loot_chef_lockinput[pn] = loot_chef_lockinput[pn]-0.02
				end
			
				local bpn = pn-1;
				for i=1,4 do
					
					----------------------handle button presses-------------------
					if loot_chef_lockinput[pn] <= 0 then
						if loot_keytimer[i+(bpn*4)] <= 0.04 and loot_chef_held[i+(bpn*4)] == 0 then
							
							--Trace('step');
							
							local note = loot_chef_GetNearestNote(i);
							if note ~= -1 then
								--we hit a pancake, remove it from play
								--loot_sound('heal');
								loot_chef_notes[note]:stoptweening();
								loot_chef_notes[note]:hidden(1);
								loot_chef_arrows[note]:stoptweening();
								loot_chef_pancakes = loot_chef_pancakes+1;
								MESSAGEMAN:Broadcast('UpdatePancakes');
							end
							
							loot_chef_held[i+(bpn*4)] = 1
						end
						
					end
					
					----------------------don't touch this------------------------
					--release all buttons - used for detecting if a button is newly pressed, as opposed to held
					if loot_keytimer[i+(bpn*4)] > 0.04 then
						loot_chef_held[i+(bpn*4)] = 0
					end
					---------------------end don't touch this----------------------
					
				end
			end
			
			if GAMESTATE:GetSongBeat()<400 then
				self:sleep(0.02);
			else
				self:sleep(0.04);
			end
			if not loot_chef_paused then
				self:queuecommand('Update');
			end
			
		end"
	/>
	
	<LAER Type="Quad" OnCommand="hidden,1" InitCommand="%function(self) loot_chef_controller = self end" />
	<LAER Type="Quad" OnCommand="hidden,1" PauseCommand="%function(self) loot_chef_paused = true end" />

<Code
Type="Quad"
OnCommand="hidden,1"
InitCommand="%function(self)

	loot_chef_speedmod = 1.5;

	loot_curnote_chef = 1;
	
	loot_chef_pancakes = 0;
	
	loot_chef_droptimer = 0;
	
	local loot_chefnfptr = 1;
	loot_chef_noteflashes = {};
	function loot_chef_spawn_noteflash(col)
		local a = loot_chef_noteflashes[loot_chefnfptr];
		
		if col > 3 then col = col-4 end
		
		a:finishtweening();
		a:hidden(0);
		a:animate(1);
		a:setstate(0);
		a:blend('add');
		a:x((75+(57*col))*(SCREEN_WIDTH/640));
		a:y(370*(SCREEN_HEIGHT/480));
		a:zoom(1.3);
		a:linear(0.3);
		a:zoom(1.6);
		a:queuecommand('Hide');
		
		loot_chefnfptr = loot_chefnfptr+1
		if loot_chefnfptr > table.getn(loot_chef_noteflashes) then
			loot_chefnfptr = 1
		end
	end
	
	loot_chef_nearest = {{},{},{},{}}
	loot_col_lastnearest = {1,1,1,1}
	
	loot_chef_zooms = {1,1.1,.91,1};
	loot_chef_xpos = {-220+16-10,-155-16-10,-155+16-10,-100-16-10};
	loot_chef_ypos = {100,120,85,100};
	loot_chef_zpos = {0,2,0,0};
	
	local maxdepth = 0;
	
	function loot_chef_GetNearestNote(col)
		if table.getn(loot_chef_nearest[col]) == 0 then
			return -1;
		else
			for i=loot_col_lastnearest[col],table.getn(loot_chef_nearest[col]) do
				local targ = loot_chef_nearest[col][i][1]
				local early = loot_chef_nearest[col][i][1]-loot_greatwindow
				local late = loot_chef_nearest[col][i][1]+loot_greatwindow
				local beat = GAMESTATE:GetSongBeat()
				if beat > early and beat < late then
					loot_col_lastnearest[col] = i+1
					return loot_chef_nearest[col][i][2]
				elseif beat <= early then
					loot_col_lastnearest[col] = i
					break;
				end
			end
		end
		return -1;
	end
	
	local loot_chefptr = 1;
	loot_chef_notes = {};
	loot_chef_arrows = {};
	loot_chef_syrup = {};
	function loot_chef_spawn_note(beat,col,speedmod)
		
		MESSAGEMAN:Broadcast('ChefThrow');
		
		local a = loot_chef_notes[loot_chefptr];
		local b = loot_chef_arrows[loot_chefptr];
		local c = loot_chef_syrup[loot_chefptr];
		
		table.insert(loot_chef_nearest[col+1],{beat,loot_chefptr});
		
		a:finishtweening();
		a:hidden(0);
		a:diffusealpha(1);
		a:animate(0);
		
		a:x(310);
		a:y(310);
		a:z(loot_chef_zpos[col+1]);
		a:decelerate(((120/loot_bpm)/speedmod)/loot_ratemod);
		a:y(70);
		a:accelerate(((120/loot_bpm)/speedmod)/loot_ratemod);
		a:y(260);
		a:linear(((20/loot_bpm)/speedmod)/loot_ratemod);
		a:y(330);
		a:addx(-10);
		a:sleep(0);
		a:z(-3+maxdepth);
		maxdepth = maxdepth+0.001;
		
		a:sleep(1);
		a:queuecommand('Hide');
		
		local rz = math.random(1,2);
		local rx = -16+math.random(0,32);
		local ry = -8+math.random(0,16);
		
		b:setstate(0);
		b:zoom(1);
		b:rotationz(loot_dirs[col+1]+30);
		b:x(0);
		b:y(0);
		b:z(0);
		b:linear(((240/loot_bpm)/speedmod)/loot_ratemod);
		b:rotationz(loot_dirs[col+1]);
		b:zoom(loot_chef_zooms[col+1]);
		b:x(loot_chef_xpos[col+1]+rx);
		b:y(loot_chef_ypos[col+1]+ry);
		b:sleep(((10/loot_bpm)/speedmod)/loot_ratemod);
		b:queuemessage('Drop');
		b:sleep(((10/loot_bpm)/speedmod)/loot_ratemod);
		b:rotationz(0);
		if col == 1 or col == 2 then
			b:queuecommand('Splat');
		else
			b:queuecommand('Splat2');
		end
		b:z(1);
		b:zoom(1.3*loot_chef_zooms[col+1]);
		if col == 2 or (rz == 2 and (col == 0 or col == 3)) then
			b:zoomy(-1.3*loot_chef_zooms[col+1]);
		end
		if (rz == 2 and (col == 1 or col == 2)) or col == 3 then
			b:zoomx(-1.3*loot_chef_zooms[col+1]);
		end
		b:linear(0.2);
		b:zoom(1.2*loot_chef_zooms[col+1]);
		if col == 2 or (rz == 2 and (col == 0 or col == 3)) then
			b:zoomy(-1.2*loot_chef_zooms[col+1]);
		end
		if (rz == 2 and (col == 1 or col == 2)) or col == 3 then
			b:zoomx(-1.2*loot_chef_zooms[col+1]);
		end
		
		c:setstate(0);
		c:zoom(1);
		c:rotationz(loot_dirs[col+1]+30);
		c:x(0);
		c:y(0);
		c:z(1);
		loot_quantize(c,beat);
		c:linear(((240/loot_bpm)/speedmod)/loot_ratemod);
		c:rotationz(loot_dirs[col+1]);
		c:zoom(loot_chef_zooms[col+1]);
		c:x(loot_chef_xpos[col+1]+rx);
		c:y(loot_chef_ypos[col+1]+ry);
		c:sleep(((20/loot_bpm)/speedmod)/loot_ratemod);
		c:rotationz(0);
		c:queuecommand('Splat');
		c:z(0);
		c:zoom(1.3*loot_chef_zooms[col+1]);
		if rz == 2 then
			c:zoomx(-1.3*loot_chef_zooms[col+1]);
		end
		c:linear(0.2);
		c:zoom(1.2*loot_chef_zooms[col+1]);
		if rz == 2 then
			c:zoomx(-1.2*loot_chef_zooms[col+1]);
		end
		
		loot_chefptr = loot_chefptr+1
		if loot_chefptr > table.getn(loot_chef_notes) then
			loot_chefptr = 1
		end
		
	end
	
end"
/>

	<LAER File="bg" OnCommand="x,320;y,240;z,-19;" />
	<LAER File="ayaze" OnCommand="horizalign,right;x,640;y,192;hidden,1" MGHMessageCommand="hidden,0" />
	
	<LAER Type="Quad" OnCommand="hidden,1"
	DropMessageCommand="%function(self)
		if GAMESTATE:GetSongBeat()>150 and GAMESTATE:GetSongBeat()<158 and loot_chef_droptimer <= 0 then
			taro_Sound('drop');
			loot_chef_droptimer = 0.2;
		end
	end"
	/>
	
	<LAER File="shadow" OnCommand="bob;effectclock,bgm;effectperiod,2;effectmagnitude,-5,0,0;x,470;y,448;z,-3;zoom,0.8" />
	
	<LAER Type="ActorFrame" OnCommand="x,310-155-20;y,330+25;z,-1;zoom,1;"
	StepP1LeftPressMessageCommand="finishtweening;addx,-30;accelerate,0.15;addx,30"
	StepP2LeftPressMessageCommand="finishtweening;addx,-30;accelerate,0.15;addx,30"
	StepP1RightPressMessageCommand="finishtweening;addx,30;accelerate,0.15;addx,-30"
	StepP2RightPressMessageCommand="finishtweening;addx,30;accelerate,0.15;addx,-30"
	StepP1UpPressMessageCommand="finishtweening;addx,10;addz,-4;zoom,.91;accelerate,0.15;addx,-10;addz,4;zoom,1"
	StepP2UpPressMessageCommand="finishtweening;addx,10;addz,-4;zoom,.91;accelerate,0.15;addx,-10;addz,4;zoom,1"
	StepP1DownPressMessageCommand="finishtweening;addx,-10;addz,1;zoom,1.1;accelerate,0.15;addx,10;addz,-1;zoom,1"
	StepP2DownPressMessageCommand="finishtweening;addx,-10;addz,1;zoom,1.1;accelerate,0.15;addx,10;addz,-1;zoom,1"
	><children>
		<LAER File="frisk" OnCommand=""
		UpdatePancakesMessageCommand="finishtweening;glow,1,1,1,.8;linear,0.1;glow,.7,1,1,0"
		/>
		<LAER File="pancakes" OnCommand="y,-16;animate,0;setstate,0"
		UpdatePancakesMessageCommand="%function(self)
			self:setstate(math.ceil(math.min(loot_chef_pancakes/3,9)));
		end"
		/>
	</children></LAER>
	
	<LAER Type="ActorFrame" OnCommand="bob;effectclock,bgm;effectperiod,2;effectmagnitude,-5,0,0;x,470;y,448;z,-3;zoom,0.8" ><children>
	<LAER Type="ActorFrame" OnCommand="wag;effectclock,bgm;effectperiod,2;effectmagnitude,0,0,5;" ><children>
		<LAER Type="ActorFrame" OnCommand="wag;effectclock,bgm;effectperiod,1;effectmagnitude,0,0,-10;x,70;y,-120" ><children>
			<LAER File="m_hand_l" OnCommand="x,44;y,-18;" />
		</children></LAER>
		<LAER Type="ActorFrame" OnCommand="wag;effectclock,bgm;effectperiod,2;effectmagnitude,0,0,-10;x,-70;y,-120;rotationz,-15"
		ChefThrowMessageCommand="finishtweening;rotationz,15;accelerate,0.15;rotationz,-15;"
		><children>
			<LAER File="m_hand_r" OnCommand="x,-84;y,-20;" />
		</children></LAER>
		<LAER File="m_body" OnCommand="y,-150;" />
	</children></LAER>
	</children></LAER>
	
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>	
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
<LAER Type="ActorFrame" OnCommand="hidden,1;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"
SetMeCommand="%function(self) table.insert(loot_chef_notes,self) self:SetDrawByZPosition(true) end" ><children>
	<VLayer File="arrow" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_arrows,self) end"
	SplatCommand="setstate,1;" Splat2Command="setstate,2;" />
	<VLayer File="syrup" OnCommand="animate,0;sleep,0.02;queuecommand,SetMe2"
	SetMe2Command="%function(self) table.insert(loot_chef_syrup,self) end"
	SplatCommand="setstate,1;" />
</children></LAER>
	
<VLayer File="_notehit.sprite" OnCommand="hidden,1;animate,0;sleep,0.015;queuecommand,SetMe"
SetMeCommand="%function(self) table.insert(loot_chef_noteflashes,self) end" HideCommand="hidden,1"/>
<VLayer File="_notehit.sprite" OnCommand="hidden,1;animate,0;sleep,0.015;queuecommand,SetMe"
SetMeCommand="%function(self) table.insert(loot_chef_noteflashes,self) end" HideCommand="hidden,1"/>
<VLayer File="_notehit.sprite" OnCommand="hidden,1;animate,0;sleep,0.015;queuecommand,SetMe"
SetMeCommand="%function(self) table.insert(loot_chef_noteflashes,self) end" HideCommand="hidden,1"/>
<VLayer File="_notehit.sprite" OnCommand="hidden,1;animate,0;sleep,0.015;queuecommand,SetMe"
SetMeCommand="%function(self) table.insert(loot_chef_noteflashes,self) end" HideCommand="hidden,1"/>
<VLayer File="_notehit.sprite" OnCommand="hidden,1;animate,0;sleep,0.015;queuecommand,SetMe"
SetMeCommand="%function(self) table.insert(loot_chef_noteflashes,self) end" HideCommand="hidden,1"/>
<VLayer File="_notehit.sprite" OnCommand="hidden,1;animate,0;sleep,0.015;queuecommand,SetMe"
SetMeCommand="%function(self) table.insert(loot_chef_noteflashes,self) end" HideCommand="hidden,1"/>
<VLayer File="_notehit.sprite" OnCommand="hidden,1;animate,0;sleep,0.015;queuecommand,SetMe"
SetMeCommand="%function(self) table.insert(loot_chef_noteflashes,self) end" HideCommand="hidden,1"/>
<VLayer File="_notehit.sprite" OnCommand="hidden,1;animate,0;sleep,0.015;queuecommand,SetMe"
SetMeCommand="%function(self) table.insert(loot_chef_noteflashes,self) end" HideCommand="hidden,1"/>
	
<ZZZLayer File="judgment 1x6" InitCommand="%function(self) loot_chef_jud1 = self end"
OnCommand="animate,0;zoomy,0;x,60;y,224-10;z,-10" />
<ZZZLayer Type="ActorFrame" OnCommand="x,60;y,224+20;z,-10" InitCommand="%function(self) loot_chef_com1 = self; self:hidden(1); end"><children>
	<Layer File="combo.sprite"
	InitCommand="animate,0; setstate,10; croptop,0.015; cropright,0.015; zoom,0.8; x,(20*-1);"
	P1BrokeComboMessageCommand="setstate,10"
	P1UpdateCurComboMessageCommand="%function(self) local ass = loot_comboP1 if ass >= 100 then local str = string.format('%05d', ass);
	local digit = string.sub(str, 3, 3); self:setstate(tonumber(digit)); else self:setstate(10) end end" />
	<Layer File="combo.sprite"
	InitCommand="animate,0; setstate,10; croptop,0.015; cropright,0.015; zoom,0.8; x,(20*0);"
	P1BrokeComboMessageCommand="setstate,10"
	P1UpdateCurComboMessageCommand="%function(self) local ass = loot_comboP1 if ass >= 10 then local str = string.format('%05d', ass);
	local digit = string.sub(str, 4, 4); self:setstate(tonumber(digit)); else self:setstate(10) end end" />
	<Layer File="combo.sprite"
	InitCommand="animate,0; setstate,10; croptop,0.015; cropright,0.015; zoom,0.8; x,(20*1);"
	P1BrokeComboMessageCommand="setstate,10"
	P1UpdateCurComboMessageCommand="%function(self) local ass = loot_comboP1 local str = string.format('%05d', ass);
	local digit = string.sub(str, 5, 5); self:setstate(tonumber(digit)); end" />
</children></ZZZLayer>
<ZZZLayer File="judgment 1x6" InitCommand="%function(self) loot_chef_jud2 = self end"
OnCommand="animate,0;zoomy,0;x,256;y,224-12;z,-10" />
<ZZZLayer Type="ActorFrame" OnCommand="x,256;y,224+20;z,-10" InitCommand="%function(self) loot_chef_com2 = self; self:hidden(1); end"><children>
	<Layer File="combo.sprite"
	InitCommand="animate,0; setstate,10; croptop,0.015; cropright,0.015; zoom,0.8; x,(20*-1);"
	P2BrokeComboMessageCommand="setstate,10"
	P2UpdateCurComboMessageCommand="%function(self) local ass = loot_comboP2 if ass >= 100 then local str = string.format('%05d', ass);
	local digit = string.sub(str, 3, 3); self:setstate(tonumber(digit)); else self:setstate(10) end end" />
	<Layer File="combo.sprite"
	InitCommand="animate,0; setstate,10; croptop,0.015; cropright,0.015; zoom,0.8; x,(20*0);"
	P2BrokeComboMessageCommand="setstate,10"
	P2UpdateCurComboMessageCommand="%function(self) local ass = loot_comboP2 if ass >= 10 then local str = string.format('%05d', ass);
	local digit = string.sub(str, 4, 4); self:setstate(tonumber(digit)); else self:setstate(10) end end" />
	<Layer File="combo.sprite"
	InitCommand="animate,0; setstate,10; croptop,0.015; cropright,0.015; zoom,0.8; x,(20*1);"
	P2BrokeComboMessageCommand="setstate,10"
	P2UpdateCurComboMessageCommand="%function(self) local ass = loot_comboP2 local str = string.format('%05d', ass);
	local digit = string.sub(str, 5, 5); self:setstate(tonumber(digit)); end" />
</children></ZZZLayer>

</children></ActorFrame>
</children></ActorFrame>
</children></GAME>