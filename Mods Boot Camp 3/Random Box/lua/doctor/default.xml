<ActorFrame><children>
<ActorFrame OnCommand="x,-SCREEN_CENTER_X;y,-SCREEN_CENTER_Y"><children>
<Layer Type="ActorFrame" OnCommand="x,0;y,0;" MawaResetFaceMessageCommand="playcommand,NFace;" ><children>

	<CODE Type="Quad" 
		InitCommand="%function(self)
			
			loot_curnote_doctor = 1
			
			loot_doctor_notes = {}
			loot_doctor_crossed = {}
			loot_doctor_ptr = 0
			
			function loot_doctor_makenote(obj)
				obj:zoomto(64,64)
				obj:diffuse(1,1,1,.4)
				obj:aux(-1)
				obj:diffusealpha(0)
				obj:z(table.getn(loot_doctor_notes))
				table.insert(loot_doctor_notes,obj)
				table.insert(loot_doctor_crossed,0)
			end
			
			function loot_doctor_get_note()
				
				loot_doctor_ptr = loot_doctor_ptr+1
				local n = math.mod(loot_doctor_ptr,table.getn(loot_doctor_notes))+1
				local a = loot_doctor_notes[ n ]
				
				loot_doctor_crossed[ n ] = 0;
				
				return a
			end
			
			function loot_doctor_spawn_note(beat,col)
			
				--Trace('benis');
				
				local a = loot_doctor_get_note()
				
				a:finishtweening()
				a:hidden(1)
				a:aux(col)
				a:diffusealpha(.4)
				a:x( 400-32-64*5 - 10 )
				a:linear(3.5*60/137)
				a:x( 400-32-64*-0.5 )
				a:sleep(0)
				a:diffusealpha(0)
				a:aux(-1)
				
			end
			
		end"
		OnCommand="queuecommand,Update"
		UpdateCommand="%function(self)
			
			if GAMESTATE:GetSongBeat() > mod_firstSeenBeat+0.1 then
				for i=1,table.getn(loot_doctor_notes) do
					local a = loot_doctor_notes[i]
					local cross = loot_doctor_crossed[i]
					if a:getaux() > -1 and a:GetX() >= 400-32-64*(5-cross)-10 then
						--Trace('Cross '..cross)
						local b = _G['loot_doctor_r'..cross]
						if b then
							b:finishtweening()
							b:rotationz(loot_dirs[a:getaux()+1])
							b:zoomy(0)
							b:zoomx(.96)
							b:bounceend(5/137)
							b:zoomy(.96)
							b:sleep(10/137)
							b:accelerate(15/137)
							b:zoom(0)
						end
						loot_doctor_crossed[i] = loot_doctor_crossed[i]+1
					end
				end
			end
			
			self:sleep(0.02)
			self:queuecommand('Update');
			
		end"
	/>

	<LAER File="bg" OnCommand="x,320;y,240;"
	SpeedUp4MessageCommand="diffuse,1,.4,.4,1"
	SpeedUp5MessageCommand="diffuse,1,0,0,1"
	ResetColorMessageCommand="diffuse,1,1,1,1"
	/>
	
	<LAER File="memes/meme" OnCommand="x,330;y,96;hidden,1"
	NFaceCommand="animate,0;setstate,math.random(0,7);hidden,0;"
	SpeedUp4MessageCommand="diffuse,1,.4,.4,1"
	SpeedUp5MessageCommand="diffuse,1,0,0,1"
	ResetColorMessageCommand="diffuse,1,1,1,1"
	/>
	
	<LAER Type="ActorFrame"OnCommand="x,286;y,226;
	pulse;effectoffset,0.05;effectclock,bgm;effectperiod,1;effectmagnitude,1,1,1;effectcolor1,1.03,.97,1,1;effectcolor2,.97,1.03,1,1;"
	SpeedUp1MessageCommand="playcommand,Spd1;decelerate,30/115;addy,-60;accelerate,30/115;addy,60;
							decelerate,30/120;addy,-60;accelerate,30/120;addy,60;
							decelerate,30/125;addy,-60;accelerate,30/125;addy,60;
							decelerate,30/130;addy,-60;accelerate,30/130;addy,60;"
	SpeedUp3MessageCommand="playcommand,Spd3;decelerate,30/155;addy,-60;accelerate,30/155;addy,60;
							decelerate,30/160;addy,-60;accelerate,30/165;addy,60;
							decelerate,30/175;addy,-60;accelerate,30/175;addy,60;"
	SpeedUp2MessageCommand="playcommand,Spd2;decelerate,30/155;addy,-60;accelerate,30/155;addy,60;"
	SpeedUp4MessageCommand="playcommand,Spd4;"
	SpeedUp5MessageCommand="playcommand,Spd5;"
	><children>
		<LAER File="monitor" OnCommand="effectclock,bgm;x,21;y,-32;zoom,0.7;rotationy,-19;rotationx,19;diffuse,0,1,0,1;"/>
		<LAER File="static.sprite" OnCommand="x,21;y,-32;zoom,0.7;rotationy,-19;rotationx,19;diffusealpha,0;"
		MawaRightP1MessageCommand="linear,0.1;diffusealpha,1;linear,0.2;diffusealpha,0;" />
		<LAER File="curs" OnCommand="x,21;y,-32;zoom,0.35;zoomz,0.5;rotationy,-19;rotationx,19;diffusealpha,0;" MawaRightP1MessageCommand="sleep,0.1;diffusealpha,1;" />
		<LAER File="hrm.png" OnCommand="y,-30;" />
		<LAER File="hrm_mask" OnCommand="blend,noeffect;zwrite,1;y,-30;" />
		<LAER File="_eurostile outline" Text="137bpm"
		OnCommand="shadowlength,0;zoom,0.44;y,14;x,30;rotationy,-19;rotationx,19;rotationz,-4;" />
	</children></LAER>
	
	<LAER File="darren" OnCommand="vertalign,bottom;animate,0;x,91;y,384-5;effectoffset,0.3;
	pulse;effectclock,bgm;effectperiod,0.6;effectdelay,0.4;effectmagnitude,1,1,1;effectcolor2,1.01,.99,1,1;effectcolor1,.99,1,1,1;"
	NFaceCommand="effectoffset,0.3;setstate,0;
	pulse;effectclock,bgm;effectperiod,0.6;effectdelay,0.4;effectmagnitude,1,1,1;effectcolor2,1.01,.99,1,1;effectcolor1,.99,1,1,1;"
	MawaWrongP1MessageCommand="stopeffect;setstate,2;"
	MawaRightP1MessageCommand="setstate,1;"
	SpeedUp4MessageCommand="diffuse,1,.4,.4,1"
	SpeedUp5MessageCommand="diffuse,1,0,0,1"
	ResetColorMessageCommand="diffuse,1,1,1,1"
	/>
	
	<LAER File="chan_bode" OnCommand="vertalign,bottom;x,208;y,384-5;effectoffset,0.3;
	pulse;effectclock,bgm;effectperiod,0.6;effectdelay,0.4;effectmagnitude,1,1,1;effectcolor2,1.01,.99,1,1;effectcolor1,.99,1,1,1;"
	SpeedUp4MessageCommand="diffuse,1,.4,.4,1"
	SpeedUp5MessageCommand="diffuse,1,0,0,1"
	ResetColorMessageCommand="diffuse,1,1,1,1"
	/>
	<LAER File="chan_head" OnCommand="animate,0;x,203;y,146-5;bounce;effectclock,bgm;effectperiod,0.6;effectdelay,0.4;effectoffset,0.3;effectmagnitude,0,6,0" 
	NFaceCommand="setstate,0;"
	MawaRightP1MessageCommand="setstate,1;"
	MawaWrongP1MessageCommand="setstate,2;"
	SpeedUp4MessageCommand="diffuse,1,.4,.4,1"
	SpeedUp5MessageCommand="diffuse,1,0,0,1"
	ResetColorMessageCommand="diffuse,1,1,1,1"
	/>
	
	<LAER Type="ActorFrame" OnCommand="x,170;y,335;basezoomx,-1;sleep,0.02;queuecommand,SetMe"
	SetMeCommand="%function(self) --[[table.insert(mawaru_stretchers,self)]] end"><children>
		<LAER File="stretcher 1x2" OnCommand="animate,0;setstate,0;"
		SpeedUp4MessageCommand="diffuse,1,.4,.4,1"
		SpeedUp5MessageCommand="diffuse,1,0,0,1"
		ResetColorMessageCommand="diffuse,1,1,1,1"
		/>
		<LAER File="patients/sheet" OnCommand="hidden,0;y,-35;x,-20;zoomx,-1;"
		PatientEndCommand="hidden,1;" NextPatientCommand="hidden,0;" />
		<LAER File="patients/_misc" OnCommand="hidden,0;zoom,0.8;animate,0;setstate,23;y,-43;x,45;rotationz,85;"
		PatientEndCommand="hidden,1;" NextPatientCommand="%function(self)
			self:setstate(23);
			self:hidden(0);
		end" />
		<LAER File="stretcher_bar" OnCommand=""
		SpeedUp4MessageCommand="diffuse,1,.4,.4,1"
		SpeedUp5MessageCommand="diffuse,1,0,0,1"
		ResetColorMessageCommand="diffuse,1,1,1,1"
		/>
	</children></LAER>
	
	<LAER Type="Quad" OnCommand="stretchto,0,0,640,480;diffuse,0,0,0,1;fadetop,.4;croptop,.5;" />
	<LAER File="hand" OnCommand="x,640-256;y,360;" StepP1MessageCommand="setstate,0;" StepP2MessageCommand="setstate,0;" />
	
	<LAER Type="ActorFrame" OnCommand="y,240;"><children>
		<LAER Type="Quad" OnCommand="zoomto,640,80;diffuse,0,0,0,.6;x,320;" />
		
		<LAER Type="Quad" OnCommand="horizalign,left;zoomto,400,4;x,0;diffuse,#00CC00;" />
		<LAER Type="Quad" OnCommand="horizalign,left;zoomto,176,4;x,400;diffuse,#FFCC00;" />
		
		<LAER Type="Quad" OnCommand="zoomto,64,80;x,470;diffuse,0,1,1,0;" NoteCrossMessageCommand="finishtweening;diffusealpha,1;linear,.2;diffusealpha,0;" />
		<LAER File="_notehit" OnCommand="zoom,1.4;blend,add;x,475;diffusealpha,.7;" NoteCrossMessageCommand="setstate,0;" />
		
		<LAER File="p1" InitCommand="%function(self) loot_doctor_r0 = self end" OnCommand="zoom,0;x,400-32-64*5;" />
		<LAER File="p1" InitCommand="%function(self) loot_doctor_r1 = self end" OnCommand="zoom,0;x,400-32-64*4;" />
		<LAER File="p1" InitCommand="%function(self) loot_doctor_r2 = self end" OnCommand="zoom,0;x,400-32-64*3;" />
		<LAER File="p1" InitCommand="%function(self) loot_doctor_r3 = self end" OnCommand="zoom,0;x,400-32-64*2;" />
		<LAER File="p1" InitCommand="%function(self) loot_doctor_r4 = self end" OnCommand="zoom,0;x,400-32-64*1;" />
		<LAER File="p1" InitCommand="%function(self) loot_doctor_r5 = self end" OnCommand="zoom,0;x,400-32-64*0;" />
		
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		<LAER Type="Quad" OnCommand="hidden,1;sleep,0.02;queuecommand,Make" MakeCommand="%function(self) loot_doctor_makenote(self) end" />
		
		<LAER File="heart" OnCommand="x,576;effectoffset,0.3;zoom,1.2;
		pulse;effectclock,bgm;effectperiod,0.6;effectdelay,0.4;effectmagnitude,1,1,1;effectcolor2,1.1,.9,1,1;effectcolor1,.9,1.1,1,1;" />
	</children></LAER>
	
</children></Layer>
</children></ActorFrame>
</children></ActorFrame>