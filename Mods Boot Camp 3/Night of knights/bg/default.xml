<ActorFrame InitCommand="%function(self) sak_scrollspeed = 1.3 end" > <children>

	<Layer
		File="background.png"
		OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;ZoomToWidth,SCREEN_WIDTH;ZoomToHeight,SCREEN_HEIGHT;diffuse,0,0,0,1"
	/>
	
	<Layer Type="Quad" OnCommand="stretchto,0,0,SCREEN_WIDTH,SCREEN_HEIGHT;diffuse,77/255,37/255,37/255,.5;" />

	<Layer Type="ActorFrame" NameCommand="%function(self) sak_bg = self end" OnCommand="playcommand,Name;fov,90;x,SCREEN_CENTER_X+0;y,SCREEN_CENTER_Y-100;z,200;rotationx,15;rotationy,0;" ><children>
		<Layer File="worsewall" NameCommand="%function(self) sak_bg_wall1 = self end"
		OnCommand="playcommand,Name;rotationy,90;cullmode,front;x,-256;y,0;z,-500;customtexturerect,0,0,2,1;zoomtoheight,SCREEN_HEIGHT;zoomz,4;texcoordvelocity,sak_scrollspeed,0;fadeleft,.3;cropleft,.2;" />
		<Layer File="worsewall" NameCommand="%function(self) sak_bg_wall2 = self end"
		OnCommand="playcommand,Name;rotationy,90;cullmode,back;x,256;y,0;z,-500;customtexturerect,0+0.5,0,2+0.5,1;zoomtoheight,SCREEN_HEIGHT;zoomz,4;texcoordvelocity,sak_scrollspeed,0;fadeleft,.3;cropleft,.2;" />
		
		<Layer File="carpet" NameCommand="%function(self) sak_bg_floor = self end"
		OnCommand="playcommand,Name;rotationx,90;x,0;y,SCREEN_HEIGHT*0.5-1;z,-500;customtexturerect,0,0,2,8;zoomx,2;zoomz,8;texcoordvelocity,0,-2*sak_scrollspeed;fadebottom,.3;cropbottom,.2;" />
		<Layer File="occlusion" OnCommand="rotationx,90;x,0;y,SCREEN_HEIGHT*0.5-1;z,-500;zoomx,2;zoomz,8;fadebottom,.2;cropbottom,.3;diffusealpha,1;" />
		
		<Layer File="ceil" NameCommand="%function(self) sak_bg_ceil = self end"
		OnCommand="playcommand,Name;rotationx,90;x,0;y,SCREEN_HEIGHT*-0.5;z,-500;customtexturerect,0,0,2,8;zoomx,2;zoomz,8;texcoordvelocity,0,-2*sak_scrollspeed;fadebottom,.3;cropbottom,.2;" />
		
		<!--Layer File="shadow" NameCommand="%function(self) sak_shadow3 = self end" OnCommand="playcommand,Name;diffusealpha,.5;rotationx,90;y,SCREEN_HEIGHT*0.5;zoomz,.4;zoomx,.4;zoomy,.4;
		customtexturerect,0,0,1,1;texcoordvelocity,0,0;" />
		
		<Layer Type="ActorFrame" NameCommand="%function(self) sak_run_side=self end" OnCommand="playcommand,Name;hidden,1;y,SCREEN_HEIGHT*0.5;z,-100;" ><children>
		<Layer File="_side" NameCommand="%function(self) sak_run_side_i=self end" OnCommand="playcommand,Name;vertalign,bottom;" /> </children></Layer>
		<Layer File="_front" NameCommand="%function(self) sak_run_front=self end" OnCommand="playcommand,Name;hidden,0;vertalign,bottom;y,SCREEN_HEIGHT*0.5;z,-100;" /-->
		
	</children></Layer>
	
	<Layer Type="ActorFrame" OnCommand="fov,60;" ><children>
		<Layer File="shadow" NameCommand="%function(self) sak_shadow3 = self end" OnCommand="playcommand,Name;diffusealpha,.5;rotationx,70;y,SCREEN_HEIGHT*1;zoomz,.4;zoomx,.4;zoomy,.4;
		customtexturerect,0,0,1,1;texcoordvelocity,0,0;" />
		<Layer Type="ActorFrame" NameCommand="%function(self) sak_run_side=self end" OnCommand="playcommand,Name;hidden,1;y,SCREEN_HEIGHT*1;z,-100;" ><children>
		<Layer File="_side" NameCommand="%function(self) sak_run_side_i=self end" OnCommand="playcommand,Name;vertalign,bottom;" /> </children></Layer>
		<Layer File="_front" NameCommand="%function(self) sak_run_front=self end" OnCommand="playcommand,Name;hidden,0;vertalign,bottom;y,SCREEN_HEIGHT*1;z,-100;" />
		<Layer File="sak_jump" NameCommand="%function(self) sak_run_jump=self end" OnCommand="playcommand,Name;hidden,1;vertalign,bottom;y,SCREEN_HEIGHT*1;z,-100;" />
	</children></Layer>
	
	<Layer Type="ActorFrame" OnCommand="fov,60;" ><children>
		<Layer File="shadow" NameCommand="%function(self) sak_shadow1 = self end" OnCommand="playcommand,Name;diffusealpha,.5;rotationx,90;y,SCREEN_HEIGHT*1;zoomz,.8;zoomx,1.2;" />
		<Layer File="shadow" NameCommand="%function(self) sak_shadow2 = self end" OnCommand="playcommand,Name;diffusealpha,.5;rotationx,90;y,SCREEN_HEIGHT*1;zoomz,.8;zoomx,1.2;" />
	</children></Layer>
	
	<Layer Type="Quad" NameCommand="%function(self) sak_fader = self end" OnCommand="playcommand,Name;stretchto,0,0,SCREEN_WIDTH,SCREEN_HEIGHT;diffuse,0,0,0,1;" />
	
	
	
	
	
	
	
	<!-- intro stuff -->
	
	<Layer Type="ActorFrame" NameCommand="%function(self) sak_bg_anim = self end" OnCommand="playcommand,Name;fov,60;" ><children>
		
		<Layer File="mansion" OnCommand="x,SCREEN_WIDTH;y,SCREEN_CENTER_Y;basezoomx,SCREEN_WIDTH/640;basezoomy,SCREEN_HEIGHT/480;horizalign,right;" Frame1MessageCommand="linear,480/180;zoom,1.06;queuecommand,Hide" HideCommand="hidden,1;" />
		<Layer File="bigtree" OnCommand="vertalign,bottom;x,100;y,SCREEN_HEIGHT+40" Frame1MessageCommand="linear,480/180;zoom,1.1;addx,-40;addy,30;queuecommand,Hide" HideCommand="hidden,1;" />
		
		<Layer Type="ActorFrame" Frame2Command="playcommand,F2;hidden,0;" Frame3Command="hidden,1" OnCommand="hidden,1" ><children>
			<Layer File="intbg" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;basezoomx,SCREEN_WIDTH/640;basezoomy,SCREEN_HEIGHT/480;" F2Command="linear,480/180;zoom,1.05;" />
			<Layer File="oskari" OnCommand="animate,0;setstate,0;x,SCREEN_CENTER_X-120+50;zoom,.88;vertalign,bottom;y,SCREEN_HEIGHT-60;" F2Command="linear,480/180;zoom,0.95;addx,-5;addy,10;"
			NameCommand="%function(self) sak_oskari1=self end" />
			<Layer File="pandora" OnCommand="animate,0;setstate,0;x,SCREEN_CENTER_X+120+50;bob;effectmagnitude,0,5,0;zoom,.88;vertalign,bottom;y,SCREEN_HEIGHT-80;" F2Command="linear,480/180;zoom,0.95;addx,15;addy,10;"
			PFadeCommand="linear,.4;diffusealpha,0;" />
			<Layer File="pand_info" OnCommand="diffuseblink;effectcolor1,1,1,1,.8;effectcolor2,1,1,1,.6;effectperiod,0.02;blend,add;x,SCREEN_CENTER_X+70;y,SCREEN_HEIGHT-360;zoom,.9;" F2Command="linear,480/180;zoom,0.95;addx,10;addy,0;"
			PFadeCommand="linear,.4;diffusealpha,0;" />
			
			<Layer File="sweat" OnCommand="x,SCREEN_CENTER_X-40;y,SCREEN_HEIGHT-290;diffusealpha,0;" SweatCommand="decelerate,40/180;addy,20;diffusealpha,1;" />
			
			<Layer File="wanted" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_HEIGHT*2;vertalign,bottom;" WantedOnCommand="decelerate,60/180;y,SCREEN_HEIGHT+40;" WantedOffCommand="accelerate,60/180;y,SCREEN_HEIGHT*2;"
			 WantedOnQCommand="decelerate,30/180;y,SCREEN_HEIGHT+40;" WantedOffQCommand="accelerate,30/180;y,SCREEN_HEIGHT*2;" />
			 
		</children></Layer>
		
		<Layer File="intwall" OnCommand="hidden,1;x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;basezoomx,SCREEN_WIDTH/640;basezoomy,SCREEN_HEIGHT/480;"
		Frame3MessageCommand="hidden,0;linear,28*60/180;zoom,1.06;" HideCommand="hidden,1;" />
		<Layer File="SAkuya" OnCommand="hidden,1;vertalign,bottom;x,SCREEN_CENTER_X;y,SCREEN_HEIGHT+40;zoom,0.9;" Frame3Command="hidden,0;linear,28*60/180;zoom,1;" />
		<Layer File="sak_hand" OnCommand="hidden,1;vertalign,bottom;x,SCREEN_CENTER_X-160;y,SCREEN_HEIGHT+60;zoom,0.9;vibrate;effectmagnitude,2,2,0" Frame3Command="hidden,0;linear,28*60/180;zoom,1;addx,-10;addy,-40;" />
		
		<Layer File="intbg" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;basezoomx,SCREEN_WIDTH/640;basezoomy,SCREEN_HEIGHT/480;zoom,1.3;hidden,1;"
		Frame4Command="hidden,0;" Frame5Command="hidden,1" Zoom2Command="zoom,1.5;" />
		
		<Layer Type="ActorFrame" NameCommand="%function(self) sak_oskari2=self end" OnCommand="hidden,1;x,SCREEN_CENTER_X;zoom,1.2;y,SCREEN_HEIGHT-10;" Zoom2Command="zoom,1.4;addy,30;"
		Frame4Command="hidden,0;" Frame5Command="hidden,1" ><children>
			
			<Layer File="oskari" OnCommand="animate,0;setstate,2;zoom,1;addx,-5;addy,10;vertalign,bottom;" />
			<Layer File="sweat" OnCommand="x,25;y,-230;diffusealpha,0;" SweatCommand="decelerate,40/180;addy,20;diffusealpha,1;" HeavyCommand="diffusealpha,0;" />
			<Layer File="_heavy" OnCommand="x,-7;y,-222;diffusealpha,0;" HeavyCommand="diffusealpha,1;" />
			
		</children></Layer>
			
		<Layer Type="Quad" NameCommand="%function(self) sak_fader2 = self end" OnCommand="playcommand,Name;stretchto,0,0,SCREEN_WIDTH,SCREEN_HEIGHT;diffuse,0,0,0,1;" Frame1MessageCommand="linear,.2;diffusealpha,0;"
		Frame2MessageCommand="diffusealpha,.5;" LastFadeCommand="linear,120/180;diffusealpha,1;" />
	
	</children></Layer>
	
	
	<!-- midway stuff -->
	
	<Layer Type="ActorFrame" NameCommand="%function(self) sak_bg_anim2 = self end" OnCommand="playcommand,Name;hidden,1;fov,60;" ><children>
	
		<Layer File="intwall" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;basezoomx,SCREEN_WIDTH/640;basezoomy,SCREEN_HEIGHT/480;" />
		
		<Layer File="destination" OnCommand="bounce;effectmagnitude,0,-6,0;effectclock,bgm;effectperiod,2;animate,0;setstate,0;vertalign,bottom;x,-150;y,SCREEN_HEIGHT+0;"
		SakOnCommand="linear,16*60/180;x,420;addy,20;" SakStopCommand="stopeffect;" SakSpotCommand="stopeffect;setstate,1;zoom,1.05;linear,.2;zoom,1;"
		Boxes2Command="setstate,2;addx,-30;linear,480/180;addy,-10;addx,-30;zoom,1.1;" />
		
		<Layer File="lensflare" OnCommand="diffusealpha,0;blend,add;x,443;y,SCREEN_BOTTOM-264;zoom,1.4;fadeleft,.1;faderight,.1;cropleft,.1;cropright,.1;fadetop,.1;fadebottom,.1;"
		SakSpotCommand="decelerate,0.3;zoom,1;diffusealpha,1;pulse;effectperiod,.1;effectmagnitude,1.03,1,1;"
		Boxes2Command="addx,-40;addy,-20;linear,480/180;addx,-30;addy,-40;" />
		
		<Layer File="boxes1" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;basezoomx,SCREEN_WIDTH/640;basezoomy,SCREEN_HEIGHT/480;" Boxes2Command="hidden,1" />
		<Layer File="boxes2" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;basezoomx,SCREEN_WIDTH/640;basezoomy,SCREEN_HEIGHT/480;hidden,1;" Boxes2Command="hidden,0" />
		
		<Layer File="boxshard" OnCommand="x,200;y,SCREEN_BOTTOM-200;hidden,1;" Boxes2Command="hidden,0;linear,480/180;zoom,1.1;rotationz,-20;addx,-20;addy,-40;" />
		
		
		<Layer File="weary" OnCommand="animate,0;setstate,0;x,160;y,SCREEN_BOTTOM+10;vertalign,bottom;pulse;effectcolor1,1.01,.99,1,1;effectcolor2,.99,1.01,1,1;effectperiod,.8;effectmagnitude,1,1,1;"
		Boxes2Command="stopeffect;setstate,1;linear,480/180;addx,-30;addy,20;rotationz,-10;zoom,1.1;" />
		
		<Layer File="shades" OnCommand="x,150;y,SCREEN_BOTTOM-250;hidden,1;" Boxes2Command="hidden,0;linear,480/180;zoom,1.1;rotationz,-10;addx,-20;addy,-60;" />
		
		<Layer Type="Quad" OnCommand="stretchto,0,0,SCREEN_WIDTH,SCREEN_HEIGHT;diffuse,1,1,1,0;" WhiteFlashCommand="diffusealpha,1;linear,1;diffusealpha,0;" />
		
		<Layer Type="Quad" NameCommand="%function(self) sak_fader3 = self end" OnCommand="playcommand,Name;stretchto,0,0,SCREEN_WIDTH,SCREEN_HEIGHT;diffuse,0,0,0,1;"
		UnhideCommand="linear,.5;diffusealpha,.5;" LastFadeCommand="linear,120/180;diffusealpha,1;" />
	
	</children></Layer>
	
	
	
	
	
	
	
	
	
	
	
	<Layer File="recep" NameCommand="%function(self) sak_recep1=self end"
	OnCommand="playcommand,Name;x,SCREEN_WIDTH/2-160-96;y,SCREEN_HEIGHT-112+200;rotationz,90;diffuseramp;effectclock,bgm;effectoffset,0.05;effectdelay,0.5;effectperiod,0.5;effectcolor1,.5,.1,.1,1;effectcolor2,1,.2,.2,1;" />
	<Layer File="recep" NameCommand="%function(self) sak_recep2=self end"
	OnCommand="playcommand,Name;x,SCREEN_WIDTH/2-160-32;y,SCREEN_HEIGHT-112+200;rotationz,0;diffuseramp;effectclock,bgm;effectoffset,0.05;effectdelay,0.5;effectperiod,0.5;effectcolor1,.5,.1,.1,1;effectcolor2,1,.2,.2,1;" />
	<Layer File="recep" NameCommand="%function(self) sak_recep3=self end"
	OnCommand="playcommand,Name;x,SCREEN_WIDTH/2-160+32;y,SCREEN_HEIGHT-112+200;rotationz,180;diffuseramp;effectclock,bgm;effectoffset,0.05;effectdelay,0.5;effectperiod,0.5;effectcolor1,.5,.1,.1,1;effectcolor2,1,.2,.2,1;" />
	<Layer File="recep" NameCommand="%function(self) sak_recep4=self end"
	OnCommand="playcommand,Name;x,SCREEN_WIDTH/2-160+96;y,SCREEN_HEIGHT-112+200;rotationz,-90;diffuseramp;effectclock,bgm;effectoffset,0.05;effectdelay,0.5;effectperiod,0.5;effectcolor1,.5,.1,.1,1;effectcolor2,1,.2,.2,1;" />
	
	<Layer File="recep" NameCommand="%function(self) sak_recep5=self end"
	OnCommand="playcommand,Name;x,SCREEN_WIDTH/2+160-96;y,SCREEN_HEIGHT-112+200;rotationz,90;diffuseramp;effectclock,bgm;effectoffset,0.05;effectdelay,0.5;effectperiod,0.5;effectcolor1,.5,.1,.1,1;effectcolor2,1,.2,.2,1;" />
	<Layer File="recep" NameCommand="%function(self) sak_recep6=self end"
	OnCommand="playcommand,Name;x,SCREEN_WIDTH/2+160-32;y,SCREEN_HEIGHT-112+200;rotationz,0;diffuseramp;effectclock,bgm;effectoffset,0.05;effectdelay,0.5;effectperiod,0.5;effectcolor1,.5,.1,.1,1;effectcolor2,1,.2,.2,1;" />
	<Layer File="recep" NameCommand="%function(self) sak_recep7=self end"
	OnCommand="playcommand,Name;x,SCREEN_WIDTH/2+160+32;y,SCREEN_HEIGHT-112+200;rotationz,180;diffuseramp;effectclock,bgm;effectoffset,0.05;effectdelay,0.5;effectperiod,0.5;effectcolor1,.5,.1,.1,1;effectcolor2,1,.2,.2,1;" />
	<Layer File="recep" NameCommand="%function(self) sak_recep8=self end"
	OnCommand="playcommand,Name;x,SCREEN_WIDTH/2+160+96;y,SCREEN_HEIGHT-112+200;rotationz,-90;diffuseramp;effectclock,bgm;effectoffset,0.05;effectdelay,0.5;effectperiod,0.5;effectcolor1,.5,.1,.1,1;effectcolor2,1,.2,.2,1;" />
	
	
</children> </ActorFrame>