<ActorFrame OnCommand="fov,60;"> <children>

	<Layer
		File="background"
		OnCommand="%function(self) 
		des_background2 = self
		self:x(SCREEN_CENTER_X)
		self:y(SCREEN_CENTER_Y)
		self:basezoomx(SCREEN_WIDTH/640)
		self:basezoomy(SCREEN_HEIGHT/480)
		self:diffuse(.5,.5,.5,1)
		end"
	/>

	<Layer Type="ActorFrame" InitCommand="%function()
		
	end"
	NameCommand="%function(self) des_seismo_bg = self end"
	OnCommand="playcommand,Name;x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;hidden,1;" ><children>
		<ActorFrame FOV="90"> <children>
			<Layer
				Type="Quad"
				OnCommand="zoomto,SCREEN_WIDTH*1.5,SCREEN_HEIGHT*1.5;diffuse,#000000"
			/>
			
			<Layer
				File="back.png"
				OnCommand="zoomto,SCREEN_WIDTH*1.5,SCREEN_HEIGHT*1.5;rotationx,35;customtexturerect,0,0,2,2;texcoordvelocity,0,1;blend,add;diffusealpha,0;sleep,6;linear,4;diffusealpha,0.5"
			/>
			<Layer
				File="back.png"
				OnCommand="zoomto,SCREEN_WIDTH*1.5,SCREEN_HEIGHT*1.5;rotationx,35;customtexturerect,0,0,3,3;texcoordvelocity,0,2;blend,add;diffusealpha,0;sleep,6;linear,4;diffusealpha,0.5"
			/>
			
			<Layer
				File="whoosh"
				OnCommand="y,-100;customtexturerect,0,0,1,1;texcoordvelocity,2,0;fadeleft,0.25;faderight,0.25;zoom,4;rotationz,90;rotationx,45;diffuseshift;effectcolor1,#FFD0D0;effectcolor2,#FF8080;effectperiod,0.5"
			/>
			<Layer
				File="whoosh"
				OnCommand="x,-200;y,-100;z,-50;customtexturerect,0,0,1,1;texcoordvelocity,1.5,0;fadeleft,0.25;faderight,0.25;zoom,4;rotationz,90;rotationx,40;rotationy,-50;diffuseshift;effectcolor1,#FFD0D0;effectcolor2,#FF8080;effectperiod,0.5"
			/>
			<Layer
				File="whoosh"
				OnCommand="x,200;y,-100;z,-50;customtexturerect,0,0,1,1;texcoordvelocity,1.5,0;fadeleft,0.25;faderight,0.25;zoom,4;rotationz,90;rotationx,25;rotationy,50;diffuseshift;effectcolor1,#FFD0D0;effectcolor2,#FF8080;effectperiod,0.5"
			/>
			
			<Layer
				File="rock/rock"
				OnCommand="y,450;zoomy,8;zoomx,28;z,-250;spin;effectmagnitude,10,0,0;cullmode,back;diffuse,#FF00FF"
			/>
			
			
			<Layer
				File="flicker.png"
				OnCommand="y,-105;zoom,0;sleep,238.65;linear,0.25;zoom,0.5;rotationz,180;linear,0.25;zoom,0;rotationz,360"
			/>
			
		</children> </ActorFrame>
		
		
	</children></Layer>
	
	<Layer
		File="background"
		OnCommand="%function(self) 
		des_background = self
		self:x(SCREEN_CENTER_X)
		self:y(SCREEN_CENTER_Y)
		self:basezoomx(SCREEN_WIDTH/640)
		self:basezoomy(SCREEN_HEIGHT/480)
		self:diffuse(.5,.5,.5,1)
		end"
	/>

	<Layer Type="ActorFrame"
		NameCommand="%function(self) self:draworder(999); destroy_tenshi = self; end"
		OnCommand="playcommand,Name;propagate,1;zoomx,3;zoomy,0;y,SCREEN_HEIGHT/2+60;x,SCREEN_WIDTH/2;basezoomx,0.75;basezoomy,0.75;bob;effectmagnitude,0,1.5,0;effectperiod,0.5;effectoffset,-0.25;diffuse,#D0D0D0FF;queuecommand,Blink"
		ChargeStartCommand="sleep,0.3;queuecommand,ChargeIdle"
		ReleaseCommand="sleep,0.1;queuecommand,ReleaseIdle"
		ReleaseEndCommand="sleep,0.3;queuecommand,Idle"
	><children>
		<ActorFrame OnCommand="" VibBeginCommand="vibrate;effectmagnitude,3,3,0" VibEndCommand="stopeffect" ><children>
			<Layer
				File="tenshi/glow/charge forward"
				OnCommand="animate,1;diffusealpha,0;zoomy,1.2;diffuseshift;effectperiod,0.5;effectcolor1,1,1,1,0.5;effectcolor2,1,1,1,0.75"
				IdleCommand="playcommand,Hide"
				ChargeStartCommand="setstate,0;playcommand,Unhide"
				ChargeIdleCommand="playcommand,Hide"
				UnhideCommand="hidden,0;linear,0.25;diffusealpha,1"
				HideCommand="linear,0.25;diffusealpha,0"
			/>
			<Layer
				File="tenshi/glow/charge idle"
				OnCommand="animate,1;hidden,1;zoomy,1.2;diffuseshift;effectperiod,0.5;effectcolor1,1,1,1,0.5;effectcolor2,1,1,1,0.75"
				IdleCommand="playcommand,Hide"
				ChargeIdleCommand="playcommand,Unhide"
				ReleaseCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			<Layer
				File="tenshi/glow/charge backward"
				OnCommand="animate,1;diffusealpha,0;diffuseshift;effectperiod,0.5;effectcolor1,1,1,1,0.5;effectcolor2,1,1,1,0.75"
				ReleaseEndCommand="setstate,0;playcommand,Unhide"
				UnhideCommand="diffusealpha,1;linear,0.25;diffusealpha,0"
			/>
			
			<Layer
				File="tenshi/glow/release begin"
				OnCommand="animate,1;hidden,1;diffuseshift;effectperiod,0.5;effectcolor1,1,1,1,0.5;effectcolor2,1,1,1,0.75"
				IdleCommand="playcommand,Hide"
				ChargeIdleCommand="playcommand,Hide"
				ReleaseCommand="playcommand,Unhide"
				ReleaseIdleCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			<Layer
				File="tenshi/glow/release idle"
				OnCommand="animate,1;hidden,1;y,-5;zoomy,1.05;diffuseshift;effectperiod,0.5;effectcolor1,1,1,1,0.5;effectcolor2,1,1,1,0.75"
				IdleCommand="playcommand,Hide"
				ChargeIdleCommand="playcommand,Hide"
				ReleaseCommand="playcommand,Hide"
				ReleaseIdleCommand="playcommand,Unhide"
				ReleaseEndCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			
		<!-- base sprite -->
			<Layer
				File="tenshi/base"
				OnCommand="animate,1;"
				IdleCommand="playcommand,Unhide"
				ChargeStartCommand="playcommand,Hide"
				DefeatedCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			<Layer
				File="tenshi/eyes"
				OnCommand="animate,1;x,-3;y,-80"
				IdleCommand="playcommand,Unhide"
				ChargeStartCommand="playcommand,Hide"
				DefeatedCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			
			<Layer
				File="tenshi/charge forward"
				OnCommand="animate,1;hidden,1"
				IdleCommand="playcommand,Hide"
				ChargeStartCommand="setstate,0;playcommand,Unhide"
				ChargeIdleCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			<Layer
				File="tenshi/charge backward"
				OnCommand="animate,1;hidden,1"
				IdleCommand="playcommand,Hide"
				ReleaseEndCommand="setstate,0;playcommand,Unhide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			<Layer
				File="tenshi/charge idle"
				OnCommand="animate,1;hidden,1"
				IdleCommand="playcommand,Hide"
				ChargeIdleCommand="playcommand,Unhide"
				ReleaseCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			
			<Layer
				File="tenshi/release begin"
				OnCommand="animate,1;hidden,1"
				IdleCommand="playcommand,Hide"
				ChargeIdleCommand="playcommand,Hide"
				ReleaseCommand="playcommand,Unhide"
				ReleaseIdleCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			<Layer
				File="tenshi/release idle"
				OnCommand="animate,1;hidden,1"
				IdleCommand="playcommand,Hide"
				ChargeIdleCommand="playcommand,Hide"
				ReleaseCommand="playcommand,Hide"
				ReleaseIdleCommand="playcommand,Unhide"
				ReleaseEndCommand="playcommand,Hide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			
			<Layer
				File="tenshi/defeated"
				OnCommand="animate,1;hidden,1"
				ChargeIdleCommand="playcommand,Hide"
				DefeatedCommand="playcommand,Unhide"
				UnhideCommand="hidden,0"
				HideCommand="hidden,1"
			/>
			
			
		</children> </ActorFrame>
	</children> </Layer>
	
	<Layer Type="Quad" OnCommand="playcommand,Name;x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;zoomto,SCREEN_WIDTH,SCREEN_HEIGHT;diffuse,0,0,0,0;"
	NameCommand="%function(self) des_background_black = self end"/>
	
</children> </ActorFrame>