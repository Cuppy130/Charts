<ActorFrame><children>
	
	<Layer Type="ActorFrame" InitCommand="%function(self) self:SetFarDist(10000) self:SetName('roomgfx') end" OnCommand="fov,60;hidden,1"
	LumaOnMessageCommand="%function(self)
		self:hidden(0);
	end"
		><children>
		
		<Layer File="hdlake" OnCommand="y,sh/2 + 20;z,-32;x,0;zoom,2.3;zoomz,2.3;rotationx,-90;customtexturerect,0,0,1,1;texcoordvelocity,-.05,-.05;" />
	
		<Layer File="wall" OnCommand="x,-512;y,-sh*0.15;zoomx,2;zoomz,2;zoomtoheight,sh*1.3;rotationy,-90;diffuse,.9,.9,.9,1;" />
		<Layer File="wall" OnCommand="x,512;y,-sh*0.15;zoomx,2;zoomz,2;zoomtoheight,sh*1.3;rotationy,-90;diffuse,.9,.9,.9,1;" />
		<Layer File="floor" OnCommand="y,sh/2;x,0;zoom,2;zoomz,2;rotationx,-90;" />
		<Layer File="ceiling" OnCommand="y,sh*-0.8;x,0;zoom,2;zoomz,2;rotationx,-90;" />
		<Layer File="front" OnCommand="z,-512;y,-sh*0.15;zoomx,1024/768;zoomtoheight,sh*1.3;" />
		
		<!--the addx is for opening doors, -192*(4/3) for left and 192*(4/3) for right to open-->
		<Layer File="door1" OnCommand="z,-512+16;valign,1;y,sh/2;x,-96*(4/3);zoomx,1024/768;zoomtoheight,sh*1.3*(3/4)" 
			CloseCommand="decelerate,.2;x,-96*(4/3)"
			OpenCommand="decelerate,.2;x,-288*(4/3)"
		/>
		<Layer File="door2" OnCommand="z,-512+16;valign,1;y,sh/2;x,96*(4/3);zoomx,1024/768;zoomtoheight,sh*1.3*(3/4);" 
			CloseCommand="decelerate,.2;x,96*(4/3)"
			OpenCommand="decelerate,.2;x,288*(4/3)"
		/>
		
		<Layer File="urn" OnCommand="z,-420;x,-420;valign,1;zoom,.6;y,sh*0.5+30;" />
		<Layer File="urn" OnCommand="z,-420;x,420;valign,1;zoom,.6;y,sh*0.5+30;" />
		
		<Layer File="wlite" OnCommand="z,-332;fadebottom,.2;basezoomx,2;basezoomy,2;valign,1;y,sh/2;halign,0;x,-512;" />
		<Layer File="wlite" OnCommand="z,-332;fadebottom,.2;basezoomx,2;basezoomy,2;valign,1;y,sh/2;halign,0;zoomx,-1;x,512;" />
		
		<Layer File="naturesbeauty" OnCommand="valign,1;y,sh/2;fadebottom,.2;basezoomx,.7;basezoomy,.7;queuecommand,Loop;"
		LoopCommand="decelerate,.3;zoomy,.8;accelerate,.3;zoomy,.9;decelerate,.3;zoomy,1;accelerate,.3;zoomy,.9;queuecommand,Loop" />
		
		<Layer File="wlite" OnCommand="z,-52;fadebottom,.2;basezoomx,2;basezoomy,2;valign,1;y,sh/2;halign,0;x,-512;" />
		<Layer File="wlite" OnCommand="z,-52;fadebottom,.2;basezoomx,2;basezoomy,2;valign,1;y,sh/2;halign,0;zoomx,-1;x,512;" />
		
		<Layer File="block" OnCommand="z,512;y,sh/2;valign,0;zoomx,1024/768;zoomtoheight,sh*0.65;" />
		
		
	</children></Layer>
	
	<Layer 
		Shader="../chroma.frag" 
		File="blank" 
		OnCommand="sleep,.1;queuecommand,Beginfuckyou"
		BeginfuckyouCommand="%function(self)
			--table.insert(VV_luma,self);
			self:hidden(1);
			self:basezoomx(((SCREEN_WIDTH/DISPLAY:GetDisplayWidth())));
			self:basezoomy((-1*(SCREEN_HEIGHT/DISPLAY:GetDisplayHeight())));
			self:SetTexture(OMM_LumaAft:GetTexture());
			self:SetTextureFiltering(true);
			self:diffuse(1,1,1,1);
			self:blend('normal');
			self:croptop(.01);
			self:cropbottom(.01);
			self:cropleft(.01);
			self:cropright(.01);
			self:fadetop(.05);
			self:fadebottom(.1);
			self:fadeleft(.05);
			self:faderight(.05);
			self:SetName('zPosAux')
			self:aux(0) --this will be set somewhere between -10000 and 1000 don't ask
			self:GetShader():uniform1f( 'zPos', 1 )
		end"
		UpdateCommand="%function(self)
			self:GetShader():uniform1f( 'zPos', (self:getaux()) )
			self:sleep(.02)
			self:queuecommand('Update')
		end"
		LumaOnMessageCommand="%function(self)
            self:hidden(0);
			self:queuecommand('Update')
        end"
		LumaOn2MessageCommand="%function(self)
			self:hidden(0);
		end"
	/>
    
</children></ActorFrame>