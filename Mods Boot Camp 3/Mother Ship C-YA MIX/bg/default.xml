<ActorFrame OnCommand="playcommand,Name;"> <children>

	<Layer
		File="background"
		OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;ZoomToWidth,SCREEN_WIDTH;ZoomToHeight,SCREEN_HEIGHT;diffusealpha,.5,.5,.5,1"
	/>
	
	<Layer
		Type="Quad"
		NameCommand="%function(self) nue_bgcover = self end"
		OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;ZoomToWidth,SCREEN_WIDTH;ZoomToHeight,SCREEN_HEIGHT;diffuse,0,0,0,0;"
	/>
	
	<Layer File="nuebg" InitCommand="%function(self) mars_bglayer1 = self; end"
	OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;cropbottom,0.5;fadebottom,0.1;croptop,0.5;fadetop,0.1;" />
	
	<Layer
		File="smoke"
		NameCommand="%function(self) mars_bglayer2 = self; end"
		OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;
		ZoomToWidth,1024;ZoomToHeight,1024;spin;effectmagnitude,0,0,10;
		customtexturerect,0,0,4,4;texcoordvelocity,1*0.3,0.6*0.3;diffuse,#AAAAAAFF;diffusealpha,0;"
	/>
	<Layer
		File="smoke"
		NameCommand="%function(self) mars_bglayer2b = self; end"
		OnCommand="x,SCREEN_CENTER_X+80;y,SCREEN_CENTER_Y+40;
		ZoomToWidth,1024;ZoomToHeight,1024;spin;effectmagnitude,0,0,-13;
		customtexturerect,0,0,4,4;texcoordvelocity,-0.9*0.3,-0.4*0.3;diffuse,#AAAAAAFF;diffusealpha,0;"
	/>
	
	<Layer File="vignette" OnCommand="%function(self) self:zoom(1.3); self:y(-9999) mars_bgvig = self; end" />
	
	<Layer Type="ActorFrame" NameCommand="%function(self) mars_spacelayer=self end" OnCommand="fov,90;hidden,1;"> <children>
		
		<LAER File="space" OnCommand="zoomto,SCREEN_WIDTH*1.8,SCREEN_HEIGHT*1.8;diffuse,.6,.6,.6,1;x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;spin;effectmagnitude,0,0,4;" />
		<LAER File="earth" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_HEIGHT+60;spin;effectmagnitude,0,0,-4;" />
	
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
		<LAER Type="Quad" SetMeCommand="%function(self) table.insert(nue_stars,self) end"
		OnCommand="hidden,1;zoomto,8,8;sleep,0.02;queuecommand,SetMe" HideCommand="hidden,1"/>
	</children></Layer>
	
	<Layer Type="Quad" NameCommand="%function(self) mars_bglayer3 = self; end"
	OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;zoomtowidth,SCREEN_WIDTH;zoomtoheight,SCREEN_HEIGHT;diffuse,0,0,0,0" />
	
	<Layer Type="ActorFrame" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;basezoomx,0.7;basezoomy,0.7;zoomx,3;zoomy,0;bob;effectmagnitude,0,4,0"
	NueOnCommand="bounceend,0.3;zoom,1;" NameCommand="%function(self) mars_nue = self; end" NueOffCommand="bouncebegin,.3;zoomx,3;zoomy,0;"><children>
		<Layer Type="Quad"
		OnCommand="diffuse,1,0,0,0;diffusealpha,0;zoomtowidth,32;zoomtoheight,32;"
		EndNueMessageCommand="%function (self)
			self:finishtweening();
			self:diffusealpha(0);
		end"
		/>
		<Layer File="../nue/idle" NueOnCommand="zoomx,3;zoomy,0;bounceend,0.3;zoom,1;"
		OnCommand="zoomx,3;zoomy,0" GoLeftCommand="diffusealpha,0;" GoRightCommand="diffusealpha,0;" CastCommand="diffusealpha,0" />
		<Layer File="../nue/left" OnCommand="diffusealpha,0;" HurtBossNueDodgeMessageCommand="diffusealpha,0;"
		GoLeftCommand="diffusealpha,1;setstate,0;" GoLeft2Command="setstate,12;" GoLeft3Command="setstate,21;" GoRightCommand="diffusealpha,0;" CastCommand="diffusealpha,0" />
		<Layer File="../nue/right" OnCommand="diffusealpha,0;" HurtBossNueDodgeMessageCommand="diffusealpha,0;"
		GoLeftCommand="diffusealpha,0;" GoRight2Command="setstate,12;" GoRight3Command="setstate,21;" GoRightCommand="diffusealpha,1;setstate,0;" CastCommand="diffusealpha,0" />
		<Layer File="../nue/cast.sprite" OnCommand="diffusealpha,0;" HurtBossNueDodgeMessageCommand="diffusealpha,0;"
		GoLeftCommand="diffusealpha,0;" GoRightCommand="diffusealpha,0;" CastCommand="diffusealpha,1;setstate,0;" />
		
		
		<Layer Type="ActorFrame" OnCommand="zoom,.8;"><children>
		<Layer Type="ActorFrame" OnCommand="zoom,2.5;spin;effectmagnitude,0,0,90;"><children>
			<Layer File="../nue/casting"
			OnCommand="blend,add;diffuse,.8,.8,1,0;"
			CastCommand="%function (self)
				self:zoom(1.1);
				self:linear(0.8);
				self:diffusealpha(1);
				self:linear(1);
				self:zoom(0.7);
				self:linear(0.8);
				self:diffusealpha(0);
			end"
			/>
		</children> </Layer>
		
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="../nue/triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,.8,.8,1,0.3;effectcolor2,.8,.8,1,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="../nue/triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,.8,.8,1,0.3;effectcolor2,.8,.8,1,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="../nue/triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,.8,.8,1,0.3;effectcolor2,.8,.8,1,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		<0Layer Type="ActorFrame" CastCommand="%function(self) self:playcommand('Inner'); chara_drand = math.random(0,360);
		chara_dspd = (math.random(0,600)/100)-3; self:playcommand('Turn') end"
		TurnCommand="rotationz,chara_drand;
		linear,0.1;rotationz,chara_drand+(60*chara_dspd);
		linear,0.1;rotationz,chara_drand+(110*chara_dspd);
		linear,0.1;rotationz,chara_drand+(150*chara_dspd);
		linear,0.1;rotationz,chara_drand+(180*chara_dspd);
		linear,0.2;rotationz,chara_drand+(200*chara_dspd);
		linear,1.0;rotationz,chara_drand+(350*chara_dspd);
		linear,0.2;rotationz,chara_drand+(370*chara_dspd);
		linear,0.2;rotationz,chara_drand+(400*chara_dspd);
		linear,0.2;rotationz,chara_drand+(440*chara_dspd);
		linear,0.2;rotationz,chara_drand+(490*chara_dspd);
		linear,0.2;rotationz,chara_drand+(550*chara_dspd);"
		><children>
		<Layer File="../nue/triangle"
		OnCommand="vertalign,top;blend,add;diffusealpha,0;fadetop,0.2;fadebottom,0.2;
		diffuseblink;effectcolor1,.8,.8,1,0.3;effectcolor2,.8,.8,1,1;effectperiod,0.066"
		InnerCommand="zoom,1;diffusealpha,0;linear,0.5;diffusealpha,1;zoomy,5;zoomx,3;linear,1.5;
		zoomy,8;zoomx,3;linear,0.6;zoomy,20;zoomx,0;sleep,0;diffusealpha,0;"
		/>
		</children> </0Layer>
		</children> </Layer>
		
	</children></Layer>

</children> </ActorFrame>